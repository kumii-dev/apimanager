# Environment Variables for Vercel
# Copy these to Vercel Dashboard → Settings → Environment Variables

# =============================================================================
# GATEWAY SERVER ENVIRONMENT VARIABLES
# =============================================================================

# Node Environment
NODE_ENV=production

# Supabase Configuration
SUPABASE_URL=https://YOUR_PROJECT.supabase.co
SUPABASE_ANON_KEY=YOUR_ANON_KEY_HERE
SUPABASE_SERVICE_ROLE_KEY=YOUR_SERVICE_ROLE_KEY_HERE

# Encryption (Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))")
KMS_MASTER_KEY=YOUR_BASE64_32_BYTE_KEY_HERE

# Redis (Upstash - will be auto-configured if using Vercel integration)
REDIS_URL=redis://default:PASSWORD@redis-xxxxx.upstash.io:6379

# CORS (Add your Vercel domain)
ALLOWED_ORIGINS=https://your-project.vercel.app,https://your-custom-domain.com

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# Circuit Breaker
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60000
CIRCUIT_BREAKER_RESET_TIMEOUT=30000

# SSRF Protection (Default values, customize if needed)
SSRF_BLOCKED_CIDRS=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,127.0.0.0/8,169.254.0.0/16
SSRF_BLOCKED_HOSTNAMES=metadata.google.internal,169.254.169.254

# Request Limits
REQUEST_TIMEOUT_MS=30000
MAX_REQUEST_SIZE=10mb

# Logging
LOG_LEVEL=info
LOG_REDACT_PATHS=password,secret,token,authorization,api_key,apiKey

# Security (IMPORTANT: Set to false in production!)
DEV_BYPASS_AUTH=false

# =============================================================================
# ADMIN CLIENT ENVIRONMENT VARIABLES
# =============================================================================

# Supabase (same as gateway)
VITE_SUPABASE_URL=https://YOUR_PROJECT.supabase.co
VITE_SUPABASE_ANON_KEY=YOUR_ANON_KEY_HERE

# API Base URL (your Vercel domain)
VITE_API_BASE_URL=https://your-project.vercel.app/api

# =============================================================================
# INSTRUCTIONS
# =============================================================================

# 1. Go to Vercel Dashboard → Your Project → Settings → Environment Variables
# 2. Add each variable above
# 3. Select environment: Production, Preview, or Development
# 4. Click "Save"

# IMPORTANT NOTES:
# - Never commit this file with real values to Git
# - Generate a secure KMS_MASTER_KEY (must be 32 bytes base64 encoded)
# - Use Upstash Redis integration for REDIS_URL (recommended)
# - Update ALLOWED_ORIGINS with your actual Vercel domain
# - Set DEV_BYPASS_AUTH=false for production!

# To generate KMS_MASTER_KEY:
# node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"

# To add Upstash Redis via Vercel:
# vercel integrations add upstash-redis
