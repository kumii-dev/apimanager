# ============================================================
# KUMII API Gateway - Environment Configuration
# ISO 27001 A.10, A.12 Compliance
# ============================================================

# ============================================================
# NODE ENVIRONMENT
# ============================================================
NODE_ENV=development
PORT=3000

# ============================================================
# SUPABASE CONFIGURATION (ISO 27001 A.5 - Access Control)
# ============================================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# ============================================================
# CRYPTOGRAPHY (ISO 27001 A.10 - Cryptographic Controls)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# CRITICAL: Store securely, rotate regularly
# ============================================================
KMS_MASTER_KEY=REPLACE_WITH_BASE64_ENCODED_32_BYTE_KEY

# ============================================================
# REDIS CONFIGURATION (Optional - Falls back to memory)
# ============================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_TLS=false

# ============================================================
# RATE LIMITING (ISO 27001 A.12.1 - Operational Procedures)
# ============================================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_ADMIN_MAX_REQUESTS=1000

# ============================================================
# SECURITY HEADERS & CORS (OWASP Top 10)
# ============================================================
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000
CORS_CREDENTIALS=true

# ============================================================
# REQUEST LIMITS (DoS Protection)
# ============================================================
REQUEST_SIZE_LIMIT=10mb
REQUEST_TIMEOUT_MS=30000

# ============================================================
# CIRCUIT BREAKER DEFAULTS
# ============================================================
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_RESET_TIMEOUT_MS=60000

# ============================================================
# CACHE DEFAULTS
# ============================================================
CACHE_DEFAULT_TTL_SECONDS=60
CACHE_MAX_SIZE_MB=100

# ============================================================
# LOGGING (ISO 27001 A.12.4 - Logging & Monitoring)
# ============================================================
LOG_LEVEL=info
LOG_PRETTY=true

# ============================================================
# SSRF PROTECTION (OWASP A10:2021)
# Comma-separated blocked CIDR ranges
# ============================================================
SSRF_BLOCKED_CIDRS=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,127.0.0.0/8,169.254.0.0/16
SSRF_BLOCKED_HOSTNAMES=localhost,metadata.google.internal

# ============================================================
# UPSTREAM DEFAULTS
# ============================================================
UPSTREAM_TIMEOUT_MS=30000
UPSTREAM_MAX_REDIRECTS=3

# ============================================================
# MONITORING
# ============================================================
METRICS_ENABLED=true

# ============================================================
# DEVELOPMENT MODE (Bypasses Supabase for local testing)
# ============================================================
DEV_MODE=false
DEV_BYPASS_AUTH=false
